{"remainingRequest":"D:\\Learning\\Y3S2\\Project\\Exc\\sprintboot-vue-demo\\vue\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\Learning\\Y3S2\\Project\\Exc\\sprintboot-vue-demo\\vue\\src\\views\\UserMNG.vue?vue&type=style&index=0&id=e99a0f5e&scoped=true&lang=css","dependencies":[{"path":"D:\\Learning\\Y3S2\\Project\\Exc\\sprintboot-vue-demo\\vue\\src\\views\\UserMNG.vue","mtime":1655259156323},{"path":"D:\\Learning\\Y3S2\\Project\\Exc\\sprintboot-vue-demo\\vue\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Learning\\Y3S2\\Project\\Exc\\sprintboot-vue-demo\\vue\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\Learning\\Y3S2\\Project\\Exc\\sprintboot-vue-demo\\vue\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\Learning\\Y3S2\\Project\\Exc\\sprintboot-vue-demo\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Learning\\Y3S2\\Project\\Exc\\sprintboot-vue-demo\\vue\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5ob21lewogIHBhZGRpbmc6IDEwcHg7Cn0KLm9wZUJvYXJkewogIG1hcmdpbjogMTBweCAwOwp9Ci5zZWFyY2hCb2FyZHsKICBtYXJnaW46IDEwcHggMDsKfQouZml4ZWRPcGV7CiAgd2lkdGg6IDEyMHB4OwogIHRleHQtYWxpZ246IGNlbnRlcjsKfQoKLnVzZXJGb3JtewogIHdpZHRoOiA4MCU7CiAgZGlzcGxheTogYmxvY2s7CiAgLyp0ZXh0LWFsaWduOiBjZW50ZXI7Ki8KfQouZm9ybUl0ZW17CiAgLypkaXNwbGF5OiBpbmxpbmUtZmxleDsqLwogIHdpZHRoOiAyNTBweDsKfQo="},{"version":3,"sources":["D:\\Learning\\Y3S2\\Project\\Exc\\sprintboot-vue-demo\\vue\\src\\views\\UserMNG.vue"],"names":[],"mappings":";AA+OA,CAAC,CAAC,CAAC,CAAC,CAAC;EACH,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACf;AACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACP,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;AAChB;AACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACV,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;AAChB;AACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACP,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;EACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACpB;;AAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACP,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;EACV,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;EACd,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACxB;AACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACP,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACxB,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AACd","file":"D:/Learning/Y3S2/Project/Exc/sprintboot-vue-demo/vue/src/views/UserMNG.vue","sourceRoot":"","sourcesContent":["<template>\n  <div class=\"home\">\n    <div class=\"opeBoard\">\n      <el-button type=\"primary\" @click=\"addUser\">新增</el-button>\n      <el-button type=\"primary\" @click=\"load\">刷新</el-button>\n    </div>\n    <div class=\"searchBoard\">\n      <el-input v-model=\"searchText\" placeholder=\"输入关键字\" style=\"width: 20%\" clearable/>\n      <el-button type=\"primary\" style=\"margin: 0 5px\"\n                 @click=\"searchName\">查询</el-button>\n    </div>\n    <div class=\"displayBoard\">\n      <el-table :data=\"tableData\"\n          border\n          stripe\n          style=\"width: 100%\"\n      >\n        <el-table-column type=\"expand\">\n          <!--        修改为自定义组件，显示其他信息-->\n          <template #default=\"props\">\n            <user-expand v-bind:user=\"props.row\" />\n          </template>\n        </el-table-column>\n        <el-table-column\n            prop=\"uid\"\n            label=\"ID\"\n            sortable/>\n        <el-table-column\n            prop=\"uname\"\n            label=\"姓名\"\n            sortable />\n        <!--     后期添加查看密码功能 -->\n        <el-table-column\n            prop=\"account\"\n            label=\"账户余额\" />\n        <el-table-column\n            prop=\"bank\"\n            label=\"银行账户\" />\n        <el-table-column fixed=\"right\" label=\"操作\" class=\"fixedOpe\" width=\"180px\">\n          <template #default=\"scope\">\n            <el-button text @click=\"editUser(scope.row)\" type=\"primary\" plain>编辑</el-button>\n            <el-popconfirm title=\"确认删除？\" @confirm=\"deleteUser(scope.row.uid)\">\n              <template #reference>\n                <el-button text @click=\"\" type=\"danger\">删除</el-button>\n              </template>\n            </el-popconfirm>\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n<!--    分页-->\n    <div style=\"margin: 10px\">\n      <el-pagination\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n          :current-page=\"currentPage\"\n          :page-sizes=\"[5, 10, 20]\"\n          :page-size=\"pageSize\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          :total=\"total\">\n      </el-pagination>\n    </div>\n<!--    新增用户弹窗-->\n    <div>\n      <el-dialog\n          v-model=\"addUserVisible\"\n          :title=userDialogTitle\n          :visible.sync=\"addUserVisible\"\n          width=\"800px\"\n      >\n        <el-form class=\"userForm\" :model=\"userForm\" :inline=\"true\">\n          <el-form-item class=\"formItem\" label=\"姓名\" label-width=\"100px\">\n            <el-input style=\"width: 120px\" v-model=\"userForm.uname\" />\n          </el-form-item>\n          <el-form-item class=\"formItem\" label=\"密码\" label-width=\"100px\">\n            <el-input style=\"width: 120px\" v-model=\"userForm.upsw\" />\n          </el-form-item>\n          <el-form-item class=\"formItem\" label-width=\"100px\" label=\"性别\">\n            <el-select v-model=\"userForm.sex\" style=\"width: 120px\">\n              <el-option label=\"男\" value=\"1\" />\n              <el-option label=\"女\" value=\"0\" />\n              <el-option label=\"保密\" value=\"-1\"/>\n            </el-select>\n          </el-form-item>\n          <el-form-item class=\"formItem\" label-width=\"100px\" label=\"手机号\">\n            <el-input style=\"width: 120px\" v-model=\"userForm.phone\" />\n          </el-form-item>\n          <el-form-item class=\"formItem\" label-width=\"100px\" label=\"城市\">\n            <el-input style=\"width: 120px\" v-model=\"userForm.city\" />\n          </el-form-item>\n          <el-form-item class=\"formItem\" label-width=\"100px\" label=\"邮件\">\n            <el-input style=\"width: 200px\" v-model=\"userForm.email\" />\n          </el-form-item>\n          <el-form-item class=\"formItem\" label-width=\"100px\" label=\"身份证号\">\n            <el-input style=\"width: 200px\" v-model=\"userForm.identityNumber\" />\n          </el-form-item>\n\n        </el-form>\n        <template #footer>\n      <span class=\"dialog-footer\">\n        <el-button @click=\"addUserVisible = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"submitUser\">提交</el-button>\n      </span>\n        </template>\n      </el-dialog>\n    </div>\n\n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\nimport userExpand from \"@/components/UserExpand\";\nimport request from \"@/util/request\";\nimport axios from \"axios\";\nexport default {\n  name: 'Home',\n  components: {\n    userExpand\n  },\n  data(){\n    return {\n      operate: \"\",\n      userDialogTitle: \"\",\n      searchText: \"\",\n      currentPage: 1,\n      pageSize: 5,\n      total: 10,\n      addUserVisible: false,\n      DataList:[],\n      tableData : [],\n      userForm:{}\n    }\n  },\n  created() {\n    this.load()\n  },\n  methods: {\n    load(){\n      let params={\n        pageNumber: this.currentPage,\n        pageSize: this.pageSize,\n        searchText: this.searchText\n      }\n      request.get(\"/user\",{\n        params: params\n      })\n          .then(res=>{\n        console.log(res);\n        this.total=res.data.total;\n        this.tableData = res.data.records;\n        this.tableData.forEach(e=>{\n          for( var key in e){\n            if(e[key] === \"null\"){\n              delete e[key];\n            }\n            e.sex = String(e.sex)\n          }\n        })//过滤null\n      })\n    },\n    searchName(){\n      this.load();\n    },\n    addUser(){\n      this.addUserVisible = true;\n      this.userForm={};\n      this.operate=\"addUser\";\n      this.userDialogTitle=\"新增用户\"\n    },\n    editUser(row){\n      this.userForm = JSON.parse(JSON.stringify(row));\n      console.log(this.userForm)\n      this.addUserVisible = true;\n      this.operate=\"updateUser\"\n      this.userDialogTitle=\"编辑用户\"\n    },\n    submitUser(){\n      if (this.operate === \"addUser\"){\n        this.saveUser();\n      }else if (this.operate === \"updateUser\"){\n        this.updateUser();\n      }\n    },\n    updateUser(){\n      request.put(\"/user\",this.userForm).then(res=>{\n        // console.log(res)\n        if(res.code === '0'){\n          this.$message({\n            type:\"success\",\n            message: \"更新成功\",\n          });\n          this.addUserVisible = false;\n        }else{\n          this.$message({\n            type:\"error\",\n            message: res.msg,\n          })\n        }\n        this.load();\n      })\n    },\n    saveUser(){\n      this.userForm.status=3\n      request.post(\"/user\",this.userForm).then(res=>{\n        console.log(res)\n        this.addUserVisible = false;\n        this.load();\n      })\n    },\n    deleteUser(id){\n      console.log(id);\n      request.delete(\"/user/\"+id).then(res=>{\n        if(res.code === '0'){\n          this.$message({\n            type:\"success\",\n            message: \"删除成功\",\n          });\n          this.load()\n        }else {\n          this.$message({\n            type: \"error\",\n            message: res.msg,\n          })\n        }\n      })\n    },\n    handleSizeChange(val) {//改变每页的显示条数\n      this.pageSize = val;\n      this.load()\n    },\n    handleCurrentChange(val) {//改变页码\n      this.currentPage=val\n      this.load()\n    },\n  }\n}\n</script>\n<style scoped>\n.home{\n  padding: 10px;\n}\n.opeBoard{\n  margin: 10px 0;\n}\n.searchBoard{\n  margin: 10px 0;\n}\n.fixedOpe{\n  width: 120px;\n  text-align: center;\n}\n\n.userForm{\n  width: 80%;\n  display: block;\n  /*text-align: center;*/\n}\n.formItem{\n  /*display: inline-flex;*/\n  width: 250px;\n}\n</style>"]}]}