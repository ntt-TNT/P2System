{"remainingRequest":"D:\\Learning\\Y3S2\\Project\\Exc\\sprintboot-vue-demo\\vue\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\Learning\\Y3S2\\Project\\Exc\\sprintboot-vue-demo\\vue\\src\\views\\GoodsMNG.vue?vue&type=style&index=0&id=628af42c&scoped=true&lang=css","dependencies":[{"path":"D:\\Learning\\Y3S2\\Project\\Exc\\sprintboot-vue-demo\\vue\\src\\views\\GoodsMNG.vue","mtime":1655259194403},{"path":"D:\\Learning\\Y3S2\\Project\\Exc\\sprintboot-vue-demo\\vue\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Learning\\Y3S2\\Project\\Exc\\sprintboot-vue-demo\\vue\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\Learning\\Y3S2\\Project\\Exc\\sprintboot-vue-demo\\vue\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\Learning\\Y3S2\\Project\\Exc\\sprintboot-vue-demo\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Learning\\Y3S2\\Project\\Exc\\sprintboot-vue-demo\\vue\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5Hb29kc01OR3sKICBwYWRkaW5nOiAxMHB4Owp9Ci5vcGVCb2FyZHsKICBtYXJnaW46IDEwcHggMDsKfQouc2VhcmNoQm9hcmR7CiAgbWFyZ2luOiAxMHB4IDA7Cn0KLmZpeGVkT3BlewogIHdpZHRoOiAxMjBweDsKICB0ZXh0LWFsaWduOiBjZW50ZXI7Cn0KCi51c2VyRm9ybXsKICB3aWR0aDogODAlOwogIGRpc3BsYXk6IGJsb2NrOwogIG1hcmdpbjogMCA1NXB4OwogIC8qdGV4dC1hbGlnbjogY2VudGVyOyovCn0KLmZvcm1JdGVtewogIGRpc3BsYXk6IGlubGluZS1mbGV4OwogIHdpZHRoOiAyNTBweDsKfQo="},{"version":3,"sources":["D:\\Learning\\Y3S2\\Project\\Exc\\sprintboot-vue-demo\\vue\\src\\views\\GoodsMNG.vue"],"names":[],"mappings":";AA+QA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACP,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACf;AACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACP,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;AAChB;AACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACV,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;AAChB;AACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACP,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;EACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACpB;;AAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACP,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;EACV,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;EACd,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC;EACd,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACxB;AACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACP,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACpB,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AACd","file":"D:/Learning/Y3S2/Project/Exc/sprintboot-vue-demo/vue/src/views/GoodsMNG.vue","sourceRoot":"","sourcesContent":["<template>\n  <div class=\"GoodsMNG\">\n    <div class=\"opeBoard\">\n      <el-button type=\"primary\" @click=\"addUser\">新增</el-button>\n      <el-button type=\"primary\" @click=\"load\">刷新</el-button>\n    </div>\n    <div class=\"searchBoard\">\n      <el-input v-model=\"searchText\" placeholder=\"输入关键字\" style=\"width: 20%\" clearable/>\n      <el-button type=\"primary\" style=\"margin: 0 5px\"\n                 @click=\"searchName\">查询</el-button>\n    </div>\n    <div class=\"displayBoard\">\n      <el-table :data=\"tableData\"\n          border\n          stripe\n          style=\"width: 100%\"\n      >\n        <el-table-column type=\"expand\">\n          <!--        修改为自定义组件，显示其他信息-->\n          <template #default=\"props\">\n            <goods-expand v-bind:goods=\"props.row\" />\n          </template>\n        </el-table-column>\n        <el-table-column\n            prop=\"gid\"\n            label=\"ID\"\n            sortable/>\n        <el-table-column\n            prop=\"gname\"\n            label=\"商品名\"\n            sortable />\n        <!--     后期添加查看密码功能 -->\n        <el-table-column\n            prop=\"type\"\n            label=\"商品类型\" />\n        <el-table-column\n            prop=\"price\"\n            label=\"价格\" />\n        <el-table-column\n            prop=\"storage\"\n            label=\"库存\" />\n        <el-table-column fixed=\"right\" label=\"操作\" class=\"fixedOpe\" width=\"180px\">\n          <template #default=\"scope\">\n            <el-button text @click=\"editUser(scope.row)\" type=\"primary\" plain>编辑</el-button>\n            <el-popconfirm title=\"确认删除？\" @confirm=\"deleteUser(scope.row.gid)\">\n              <template #reference>\n                <el-button text @click=\"\" type=\"danger\">删除</el-button>\n              </template>\n            </el-popconfirm>\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n<!--    分页-->\n    <div style=\"margin: 10px\">\n      <el-pagination\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n          :current-page=\"currentPage\"\n          :page-sizes=\"[5, 10, 20]\"\n          :page-size=\"pageSize\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          :total=\"total\">\n      </el-pagination>\n    </div>\n<!--    新增商品弹窗-->\n    <div>\n      <el-dialog\n          v-model=\"addGoodsVisible\"\n          :title=goodsDialogTitle\n          :visible.sync=\"addGoodsVisible\"\n          width=\"700px\"\n          style=\"margin-left: 20px\"\n      >\n        <el-form class=\"userForm demo-form-inline\" :model=\"goodsForm\" :inline=\"true\">\n          <el-form-item label=\"商品名\" label-width=\"100px\">\n            <el-input style=\"width: 120px\" v-model=\"goodsForm.gname\" />\n          </el-form-item>\n          <el-form-item label=\"商品类型\" label-width=\"100px\">\n            <el-input style=\"width: 120px\" v-model=\"goodsForm.type\" />\n          </el-form-item>\n          <el-form-item label-width=\"100px\" label=\"商品价格\">\n            <el-input style=\"width: 120px\" v-model=\"goodsForm.price\" />\n          </el-form-item>\n          <el-form-item label-width=\"100px\" label=\"是否可议价\">\n            <el-select v-model=\"goodsForm.bargain\" style=\"width: 120px\">\n              <el-option label=\"一口价\" value=\"false\" />\n              <el-option label=\"可议价\" value=\"true\" />\n            </el-select>\n          </el-form-item>\n          <el-form-item label-width=\"100px\" label=\"库存\">\n            <el-input style=\"width: 200px\" v-model=\"goodsForm.storage\" />\n          </el-form-item>\n          <el-form-item label-width=\"100px\" label=\"新旧程度\">\n            <el-input style=\"width: 200px\" v-model=\"goodsForm.gcondition\" />\n          </el-form-item>\n          <el-form-item label-width=\"100px\" label=\"折扣\">\n            <el-input style=\"width: 200px\" v-model=\"goodsForm.sale\" />\n          </el-form-item>\n          <el-form-item label-width=\"100px\" label=\"商品介绍\">\n            <el-input style=\"width: 120px\" v-model=\"goodsForm.introduction\" />\n          </el-form-item>\n<!--          后期做成列表选择-->\n          <el-form-item label-width=\"100px\" label=\"卖家id\">\n            <el-input style=\"width: 120px\" v-model=\"goodsForm.mid\" />\n          </el-form-item>\n          <!--    商品图片上传-->\n          <el-form-item label-width=\"100px\" label=\"商品图片\">\n            <el-upload\n                class=\"upload-demo\"\n                action=\"https://jsonplaceholder.typicode.com/posts/\"\n                :on-preview=\"handlePreview\"\n                :on-remove=\"handleRemove\"\n                :before-remove=\"beforeRemove\"\n                multiple\n                :limit=\"3\"\n                :on-exceed=\"handleExceed\"\n                :file-list=\"fileList\"\n            >\n              <el-button type=\"primary\">点击上传营业执照</el-button>\n              <template #tip>\n                <div class=\"el-upload__tip\" style=\"width: 200px\">\n                  jpg/png 文件大小需小于 500KB.\n                </div>\n              </template>\n            </el-upload>\n          </el-form-item>\n\n        </el-form>\n        <template #footer>\n      <span class=\"dialog-footer\">\n        <el-button @click=\"addGoodsVisible = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"submitUser\">提交</el-button>\n      </span>\n        </template>\n      </el-dialog>\n    </div>\n\n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\nimport GoodsExpand from \"@/components/GoodsExpand\";\nimport request from \"@/util/request\";\nimport axios from \"axios\";\nexport default {\n  name: 'GoodsMNG',\n  components: {\n    GoodsExpand\n  },\n  data(){\n    return {\n      operate: \"\",\n      goodsDialogTitle: \"\",\n      searchText: \"\",\n      currentPage: 1,\n      pageSize: 5,\n      total: 10,\n      addGoodsVisible: false,\n      DataList:[],\n      tableData : [\n      ],\n      goodsForm:{},\n    }\n  },\n  created() {\n    this.load()\n  },\n  methods: {\n    load(){\n      let params={\n        pageNumber: this.currentPage,\n        pageSize: this.pageSize,\n        searchText: this.searchText\n      }\n      request.get(\"/goods\",{\n        params: params\n      }).then(res=>{\n        console.log(res);\n        this.total=res.data.total;\n        this.tableData = res.data.records;\n        this.tableData.forEach(e=>{\n          for( var key in e){\n            if(e[key] === \"null\"){\n              delete e[key];\n            }\n            e.bargain=String(e.bargain)\n          }\n        })//过滤null\n      })\n    },\n    searchName(){\n      this.load();\n    },\n    addUser(){\n      this.addGoodsVisible = true;\n      this.goodsForm={};\n      this.operate=\"addUser\";\n      this.goodsDialogTitle=\"新增商品\"\n    },\n    editUser(row){\n      this.goodsForm = JSON.parse(JSON.stringify(row));\n      console.log(this.goodsForm)\n      this.addGoodsVisible = true;\n      this.operate=\"updateUser\"\n      this.goodsDialogTitle=\"编辑商品\"\n    },\n    submitUser(){\n      if (this.operate === \"addUser\"){\n        this.saveUser();\n      }else if (this.operate === \"updateUser\"){\n        this.updateUser();\n      }\n    },\n    updateUser(){\n      request.put(\"/goods\",this.goodsForm).then(res=>{\n        // console.log(res)\n        if(res.code === '0'){\n          this.$message({\n            type:\"success\",\n            message: \"更新成功\",\n          });\n          this.addGoodsVisible = false;\n        }else{\n          this.$message({\n            type:\"error\",\n            message: res.msg,\n          })\n        }\n        this.load();\n      })\n    },\n    saveUser(){\n      this.goodsForm.status=3\n      request.post(\"/goods\",this.goodsForm).then(res=>{\n        console.log(res)\n        this.addGoodsVisible = false;\n        this.load();\n      })\n    },\n    deleteUser(id){\n      console.log(id);\n      request.delete(\"/goods/\"+id).then(res=>{\n\n        if(res.code === '0'){\n          this.$message({\n            type:\"success\",\n            message: \"删除成功\",\n          });\n          this.load()\n        }else {\n          this.$message({\n            type: \"error\",\n            message: res.msg,\n          })\n        }\n      })\n    },\n    handleSizeChange(val) {//改变每页的显示条数\n      this.pageSize = val;\n      this.load()\n    },\n    handleCurrentChange(val) {//改变页码\n      this.currentPage=val\n      this.load()\n    },\n  }\n}\n</script>\n<style scoped>\n.GoodsMNG{\n  padding: 10px;\n}\n.opeBoard{\n  margin: 10px 0;\n}\n.searchBoard{\n  margin: 10px 0;\n}\n.fixedOpe{\n  width: 120px;\n  text-align: center;\n}\n\n.userForm{\n  width: 80%;\n  display: block;\n  margin: 0 55px;\n  /*text-align: center;*/\n}\n.formItem{\n  display: inline-flex;\n  width: 250px;\n}\n</style>"]}]}